<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Nebula Graph"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@NebulaGraph"><meta name=twitter:creator content="@NebulaGraph"><meta name=twitter:domain content="nebula-graph.io"><meta name=twitter:title content="An Introduction to Google's Memory Error Detect Tool AddressSanitizer"><meta property="twitter:title" content="An Introduction to Google's Memory Error Detect Tool AddressSanitizer"><meta name=twitter:description content="This posts introduces to you Google’s memory error detect tool AddressSanitizer, covering what it is, how it works, and some best practices."><meta name=og:description content="This posts introduces to you Google’s memory error detect tool AddressSanitizer, covering what it is, how it works, and some best practices."><meta name=twitter:image content="/nebula-website/en/posts/introduction-to-google-memory-detect-tool-addresssanitizer/Medium%2013.50.15_hu0655afbbe6a31b8f27054c44f4d9574a_3224564_600x0_resize_box_2.png"><meta name=og:image content="/nebula-website/en/posts/introduction-to-google-memory-detect-tool-addresssanitizer/Medium%2013.50.15_hu0655afbbe6a31b8f27054c44f4d9574a_3224564_600x0_resize_box_2.png"><meta name=description content="This posts introduces to you Google’s memory error detect tool AddressSanitizer, covering what it is, how it works, and some best practices."><meta name=generator content="Hugo 0.65.3"><title>An Introduction to Google's Memory Error Detect Tool AddressSanitizer</title><link rel="shortcut icon" href=/nebula-website/favicon.ico><link rel=stylesheet href=/nebula-website/css/bootstrap.min.css type=text/css><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic" rel=stylesheet type=text/css><link rel=stylesheet href=/nebula-website/font-awesome/css/font-awesome.min.css type=text/css><link rel=stylesheet href=/nebula-website/css/creative.css type=text/css><link rel=stylesheet href=/nebula-website/css/modals.css type=text/css><link rel=stylesheet href=/nebula-website/css/animate.min.css type=text/css><link rel=stylesheet href=/nebula-website/css/custom/index.css type=text/css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/nebula-website/js/jquery.js></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPJVFGH');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60523578-5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-60523578-5');</script></head><body id=page-top><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PPJVFGH" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav id=mainNav class="navbar navbar-default navbar-fixed-top"><div class=nav-popup id=nav-popup><img src=/images/popup.png><img src=/images/popup.png> Nebula Graph RC4 is released! <a href=https://github.com/vesoft-inc/nebula/releases/tag/v1.0.0-rc4 target=_blank>Get Started</a> <img src=/images/shut.png id=shut onclick=shut()></div><div class=container-fluid><div class=navbar-header><div class=github-star onclick="gtag('event','Link Click',{event_category:'Engagement',event_label:'Star via Navi'})"><a class=github-button href=https://github.com/vesoft-inc/nebula data-icon=octicon-star data-show-count=true aria-label="Star vesoft-inc/nebula on GitHub">Star</a></div><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class="navbar-brand page-scroll" href=/nebula-website/en/></a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav" id=nav><li class=github-star id=github-star onclick="gtag('event','Link Click',{event_category:'Engagement',event_label:'Star via Navi'})"><a class=github-button href=https://github.com/vesoft-inc/nebula data-size=large data-show-count=true aria-label="Star vesoft-inc/nebula on GitHub">Star</a></li><li><a href=https://docs.nebula-graph.io/ target=_blank>Docs</a></li><li class=active><a href=/en/posts target>Blog</a></li><li><a href=https://discuss.nebula-graph.io/ target=_blank>Forum</a></li><li><a href=#contact_us target onclick=contactUsClick()>Contact Us</a></li><li class="dropdown navbar-right"><a class=dropdown-toggle data-toggle=dropdown href=# role=button aria-haspopup=true aria-expanded=false><img src=/images/language120x120.png>
<span class=caret></span></a><ul class=dropdown-menu><li class=nav-item><a class=dropdown-item href=/en target>English</a></li><li class=nav-item><a class=dropdown-item href=/cn target>中文</a></li></ul></li><li id=navbar-right><a href=https://github.com/vesoft-inc/nebula-web-docker target=_blank onclick="gtag('event','Button Click',{event_category:'Engagement',event_label:'Nebula Studio'})">Nebula Studio</a></li></ul></div></div></nav><script>function contactUsClick(){$('html,body').animate({scrollTop:document.documentElement.scrollHeight},800)
return false;}
function shut(){$('#nav-popup').remove();$("#top").css("padding-top","50px")
sessionStorage.setItem("popupIsRemove",true);}
if(!sessionStorage.getItem("popupIsRemove")){$("#nav-popup").css("display","block")}</script><main id=top class=blog-detail><div class=wrapper><div class=inner><div class=blog-left-aside><div class=social-share id=J_Share><h3>Share</h3><div class=nebula-share-buttons><div class="st-custom-button st-remove-label" data-network=twitter><img alt="twitter-white sharing button" src=https://platform-cdn.sharethis.com/img/twitter-white.svg></div><div class="st-custom-button st-remove-label" data-network=linkedin><img alt="linkedin-white sharing button" src=https://platform-cdn.sharethis.com/img/linkedin-white.svg></div><div class="st-custom-button st-remove-label" data-network=facebook><img alt="facebook-white sharing button" src=https://platform-cdn.sharethis.com/img/facebook-white.svg></div><div class="st-custom-button st-remove-label" data-network=hackernews><img alt="hackernews-white sharing button" src=https://platform-cdn.sharethis.com/img/hackernews-white.svg></div><div class="st-custom-button st-remove-label" data-network=reddit><img alt="reddit-white sharing button" src=https://platform-cdn.sharethis.com/img/reddit-white.svg></div><div class="st-custom-button st-remove-label" data-network=sharethis><img alt="reddit-white sharing button" src=https://platform-cdn.sharethis.com/img/sharethis-white.svg></div></div></div></div><section class=blog-content><h1>An Introduction to Google's Memory Error Detect Tool AddressSanitizer</h1><div class=blog-metas><div class=meta><img src=/images/writer.png width=16px height=16px>
<span>Simon</span></div><div class=meta><img src=/images/calendar.png width=16px height=16px>
<span>2020-02-18</span></div><div class="tags meta"><img src=/images/tag.png width=16px height=16px>
<a href=/nebula-website/en//tags/system-testing>system-testing</a></div></div><p><img src=https://user-images.githubusercontent.com/56643819/74794701-d829a480-52fe-11ea-8fe7-6bd98a95dc39.png alt=AddressSanitizer.png></p><p>As a C/C++ developer, you will encounter various problems during development, the most common ones are <strong>memory usage issues</strong> such as <strong>out of bounds, leakage</strong>.</p><p>Previously the most commonly used memory error detect tool was <a href=https://valgrind.org/>Valgrind</a>, but the biggest problem with Valgrind is that it will greatly reduce program speed, by 10 times by estimate.</p><p>Good news is the Google-developed memory error detect tool, <a href=https://github.com/google/sanitizers/wiki/AddressSanitizer>AddressSanitizer</a> (aka ASan), has greatly improved the program slowdown to two times only on average, which is very fast.</p><p>This post gives an introduction to AddressSanitizer, covering what it is, how it works, feature comparison between AddressSanitizer and other memory detection tools, as well as some best practices utilizing AddressSanitizer.</p><h2 id=introducing-addresssanitizer>Introducing AddressSanitizer</h2><p>AddressSanitizer is a compiler-based testing tool that detects various memory errors in C/C++ code at runtime.</p><p>Strictly speaking, AddressSanitizer is a compiler plug-in. It consists of two modules</p><ul><li>A compiler instrumentation module</li><li>A run-time library that replaces malloc/free</li></ul><p>The instrumentation module mainly deals with memory operations such as **store **and <strong>load</strong> at the compiler level.</p><p>The dynamic library mainly provides some complex functions at runtime such as poison/unpoison shadow memory and hooks system calling functions such as malloc/free.</p><h3 id=basic-usage-of-addresssanitizer>Basic Usage of AddressSanitizer</h3><p>According to the official Wiki, AddressSanitizer finds:</p><ul><li>Use after free (dangling pointer dereference)</li><li>Heap buffer overflow</li><li>Stack buffer overflow</li><li>Global buffer overflow</li><li>Use after return</li><li>Use after scope</li><li>Initialization order bugs</li><li>Memory leaks</li></ul><p>In this post we only focus on the basic usage. For more details, please refer to the official compiler usage documents such as <a href=https://clang.llvm.org/docs/AddressSanitizer.html>Clang</a>.</p><h4 id=example-on-use-after-free>Example on Use After Free</h4><p>The following code is a very simple example of Use after free:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=color:#75715e>//use_after_free.cpp
</span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#f92672>**</span>argv) {
  <span style=color:#66d9ef>int</span> <span style=color:#f92672>*</span>array <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span>[<span style=color:#ae81ff>100</span>];
  <span style=color:#66d9ef>delete</span> [] array;
  std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> array[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
}
</code></pre></div><p>Now, compile the code and run the executable. Here you only need to build with the <code>-fsanitize = address</code> option when compiling.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>clang++  -O -g -fsanitize<span style=color:#f92672>=</span>address ./use_after_free.cpp
./a.out
</code></pre></div><p>Finally we will see the following output:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>==</span>10960<span style=color:#f92672>==</span>ERROR: AddressSanitizer: heap-use-after-free on address 0x614000000040 at pc 0x00010d471df0 bp 0x7ffee278e6b0 sp 0x7ffee278e6a8
READ of size <span style=color:#ae81ff>4</span> at 0x614000000040 thread T0
    <span style=color:#75715e>#0 0x10d471def in main use_after_free.cpp:6</span>
    <span style=color:#75715e>#1 0x7fff732c17fc in start (libdyld.dylib:x86_64+0x1a7fc)</span>

0x614000000040 is located <span style=color:#ae81ff>0</span> bytes inside of 400-byte region <span style=color:#f92672>[</span>0x614000000040,0x6140000001d0<span style=color:#f92672>)</span>
freed by thread T0 here:
    <span style=color:#75715e>#0 0x10d4ccced in wrap__ZdaPv (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x51ced)</span>
    <span style=color:#75715e>#1 0x10d471ca1 in main use_after_free.cpp:5</span>
    <span style=color:#75715e>#2 0x7fff732c17fc in start (libdyld.dylib:x86_64+0x1a7fc)</span>

previously allocated by thread T0 here:
    <span style=color:#75715e>#0 0x10d4cc8dd in wrap__Znam (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x518dd)</span>
    <span style=color:#75715e>#1 0x10d471c96 in main use_after_free.cpp:4</span>
    <span style=color:#75715e>#2 0x7fff732c17fc in start (libdyld.dylib:x86_64+0x1a7fc)</span>

SUMMARY: AddressSanitizer: heap-use-after-free use_after_free.cpp:6 in main
</code></pre></div><p>The output clearly shows when the memory is freed and when it&rsquo;s reused.</p><h4 id=example-on-memory-leaks>Example on Memory leaks</h4><p>In the following code, the memory that p points to is not freed.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>p;

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
        p <span style=color:#f92672>=</span> malloc(<span style=color:#ae81ff>7</span>);
        p <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// The memory is leaked here.
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div><p>Now compile and run.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>clang -fsanitize<span style=color:#f92672>=</span>address -g  ./leak.c
./a.out
</code></pre></div><p>We can see the following outputs:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>=================================================================</span>
<span style=color:#f92672>==</span>17756<span style=color:#f92672>==</span>ERROR: LeakSanitizer: detected memory leaks

Direct leak of <span style=color:#ae81ff>7</span> byte<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span> in <span style=color:#ae81ff>1</span> object<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span> allocated from:
    <span style=color:#75715e>#0 0x4ffc80 in malloc (/home/simon.liu/workspace/a.out+0x4ffc80)</span>
    <span style=color:#75715e>#1 0x534ab8 in main /home/simon.liu/workspace/./leak.c:4:8</span>
    <span style=color:#75715e>#2 0x7f127c42af42 in __libc_start_main (/usr/lib64/libc.so.6+0x23f42)</span>

SUMMARY: AddressSanitizer: <span style=color:#ae81ff>7</span> byte<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span> leaked in <span style=color:#ae81ff>1</span> allocation<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>.
</code></pre></div><p>Note that <strong>memory leak detection will only be conducted before exiting the program</strong>, which means that if you continuously allocate memory and then free it at run time, AddressSanitizer will not detect memory leak. At this time you need JeMalloc/TCMalloc to help.</p><h3 id=fundamentals-of-addresssanitizer>Fundamentals of AddressSanitizer</h3><p>In this post we will give a brief introduction to AddressSanitizer&rsquo;s fundamentals. If you are interested in knowing the details of the algorithm behind, pleased refer to <a href=https://www.usenix.org/system/files/conference/atc12/atc12-final39.pdf>AddressSanitizer: a fast address sanity checker</a>.</p><p>AddressSanitizer replaces all your malloc and free, and then marks the before and after of the memory area that has been allocated (malloc) as <code>poisoned</code> (mainly to deal with overflow). And the freed memory is marked as <code>poisoned</code> (mainly to deal with <code>use after free</code>). Every memory access in your code will be translated to the following by the compiler.</p><p>Before:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#f92672>*</span>address <span style=color:#f92672>=</span> ...;  <span style=color:#75715e>// or: ... = *address;
</span></code></pre></div><p>After:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>shadow_address <span style=color:#f92672>=</span> MemToShadow(address);
<span style=color:#66d9ef>if</span> (ShadowIsPoisoned(shadow_address)) {
  ReportError(address, kAccessSize, kIsWrite);
}
<span style=color:#f92672>*</span>address <span style=color:#f92672>=</span> ...;  <span style=color:#75715e>// or: ... = *address;
</span></code></pre></div><p>First we can see a memory address translating (MemToShadow) process, followed by determining whether the accessed memory area is poisoned. If so, the tool will report an error and exit.</p><p>The reason why the translation process is here is that AddressSanitizer divides virtual memory into two parts:</p><ol><li>Main application memory（Mem）, the memory used by the current program</li><li>Shadow memory, a memory that holds main memory meta information. For example, those areas of main memory that are poisoned are stored in shadow memory.</li></ol><h3 id=comparison-of-addresssanitizer-and-other-memory-detection-tools>Comparison of AddressSanitizer and Other Memory Detection Tools</h3><p>The following <a href=https://github.com/google/sanitizers/wiki/AddressSanitizerComparisonOfMemoryTools#summary>figure</a> is the comparison of AddressSanitizer and other memory detection tools:</p><p><img src=https://user-images.githubusercontent.com/38887077/74824227-f1544480-5342-11ea-8986-8eb88adaa1b3.png alt=image></p><p>Parameter Description:</p><ul><li><em><strong>DBI</strong></em>: dynamic binary instrumentation</li><li><em><strong>CTI</strong></em>: compile-time instrumentation</li><li><em><strong>UMR</strong></em>: uninitialized memory reads</li><li><em><strong>UAF</strong></em>: use-after-free (aka dangling pointer)</li><li><em><strong>UAR</strong></em>: use-after-return</li><li><em><strong>OOB</strong></em>: out-of-bounds</li><li><em><strong>x86</strong></em>: includes 32- and 64-bit.</li></ul><p>We can see that AddressSanitizer only slows down the program by 2 times compared to Valgrind&rsquo;s 10 times.</p><p>AddressSanitizer currently supports GCC since 4.8 release and Clang since 3.1 release.</p><h3 id=tips-on-using-addresssanitizer>Tips on Using AddressSanitizer</h3><ol><li><strong>Force the program to crash upon errors.</strong> When ASan finds a memory access violation, the program does not crash automatically. This is because fuzzing tools usually detect this kind of error by checking the return code. However, we can force the program to crash by modifying the environment variable <code>ASAN_OPTIONS</code> to the following before fuzzing test:</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>export ASAN_OPTIONS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;abort_on_error=1&#39;</span>/
</code></pre></div><ol start=2><li><strong>Disable memory limits to solve memory limitation problems, but pay attention to the potential risks</strong>. AddressSanitizer requires huge virtual memory (about 20 TB). But don&rsquo;t worry, this is just virtual memory. You can still use your program. However, fuzzing tools like american fuzzy lop will limit the memory usage of fuzzed software, you can solve this problem by disabling memory limits. The only thing to note is the risks brought by such operation: test samples may cause the program to allocate a large amount of memory, which may cause system instability or other applications crash. Thus when performing important fuzz tests, don&rsquo;t try to disable memory limits on the same system.</li></ol><h2 id=turn-on-addresssanitizer-in-nebula-graph>Turn on AddressSanitizer in Nebula Graph</h2><p>We used AddressSanitizer in <strong>Nebula Graph</strong> to help us find a lot of problems. Enabling AddressSanitizer in <strong>Nebula Graph</strong> is very easy. You only need to add the <code>ENABLE_ASAN</code> option in Cmake as below:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Cmake -DENABLE_ASAN<span style=color:#f92672>=</span>On
</code></pre></div><p>It is recommended that all developers turn on AddressSanitizer to run unit tests. By doing so, we can find many memory problems that are not easy to find and save debugging time.</p><h2 id=you-might-also-like>You might also like</h2><ol><li><a href=https://nebula-graph.io/en/posts/nebula-graph-architecture-overview/>Nebula Graph Architecture — A Bird’s View</a></li><li><a href=https://nebula-graph.io/en/posts/nebula-graph-storage-engine-overview/>An Introduction to Nebula Graph&rsquo;s Storage Engine</a></li><li><a href=https://nebula-graph.io/en/posts/nebula-graph-query-engine-overview/>An Introduction to Nebula Graph’s Query Engine</a></li></ol><blockquote class=star-ads><span>Like what we do ? Star us on GitHub.</span>
<a href=https://github.com/vesoft-inc/nebula onclick="gtag('event','Link Click',{event_category:'Engagement',event_label:'Star via blogbody'});">https://github.com/vesoft-inc/nebula</a></blockquote><ul class=blog-footer><li><img src=/images/tag.png>
<a href=/nebula-website/en/tags/system-testing>system-testing</a></li><li class="nebula-share st-btn"><img src=/images/share.png>
<span>Share</span><ul class=blog-footer-share-links><li class=st-custom-button data-network=twitter><img alt="twitter-white sharing button" src=https://platform-cdn.sharethis.com/img/twitter-white.svg>
<span class=st-label>Twitter</span></li><li class=st-custom-button data-network=linkedin><img alt="twitter-white sharing button" src=https://platform-cdn.sharethis.com/img/linkedin-white.svg>
<span class=st-label>Linkedin</span></li><li class=st-custom-button data-network=facebook><img alt="twitter-white sharing button" src=https://platform-cdn.sharethis.com/img/facebook-white.svg>
<span class=st-label>Facebook</span></li><li class=st-custom-button data-network=sharethis><img alt="twitter-white sharing button" src=https://platform-cdn.sharethis.com/img/sharethis-white.svg>
<span class=st-label>Others</span></li></ul></li><li onclick="location.href='\/nebula-website\/en\/posts'"><img src=/images/blog.png>
<a href=/nebula-website/en/posts>Back to blog home</a></li><li onclick="gtag('event','Link Click',{event_category:'Engagement',event_label:'RSS via blogbody'});window.open('https:\/\/nebula-graph.io/en/posts/index.xml');"><img src=/images/rss.png>
<a href=javascript:void(0);>RSS</a></li></ul><div id=discourse-comments></div></section><div class=single-side-bar><div class=tags-block><h3><img src=/img/LabelTagIcon.png>Tags</h3><ul class=blog-tags><li class=col-md-12><a href=/nebula-website/en/posts class=active>all</a></li><li><a href=/nebula-website/en/tags/architecture>architecture</a></li><li><a href=/nebula-website/en/tags/community>community</a></li><li><a href=/nebula-website/en/tags/deployment>deployment</a></li><li><a href=/nebula-website/en/tags/dev-log>dev-log</a></li><li><a href=/nebula-website/en/tags/features>features</a></li><li><a href=/nebula-website/en/tags/graph-database>graph-database</a></li><li><a href=/nebula-website/en/tags/performance>performance</a></li><li><a href=/nebula-website/en/tags/query-language>query-language</a></li><li><a href=/nebula-website/en/tags/release-notes>release-notes</a></li><li><a href=/nebula-website/en/tags/system-testing class=active>system-testing</a></li><li><a href=/nebula-website/en/tags/tools>tools</a></li><li><a href=/nebula-website/en/tags/use-cases>use-cases</a></li></ul></div><div class=blog-anchors id=J_Anchor><h3>Contents</h3><nav id=TableOfContents><ul><li><a href=#introducing-addresssanitizer>Introducing AddressSanitizer</a><ul><li><a href=#basic-usage-of-addresssanitizer>Basic Usage of AddressSanitizer</a></li><li><a href=#fundamentals-of-addresssanitizer>Fundamentals of AddressSanitizer</a></li><li><a href=#comparison-of-addresssanitizer-and-other-memory-detection-tools>Comparison of AddressSanitizer and Other Memory Detection Tools</a></li><li><a href=#tips-on-using-addresssanitizer>Tips on Using AddressSanitizer</a></li></ul></li><li><a href=#turn-on-addresssanitizer-in-nebula-graph>Turn on AddressSanitizer in Nebula Graph</a></li><li><a href=#you-might-also-like>You might also like</a></li></ul></nav></div></div></div><img onclick="location.href='#top'" class=go-ahead src=/images/up.png></div><footer class="container-fluid foot-wrap" name=contact_us><div class=container><div class=row><div class="row-content col-lg-4 col-sm-4 col-xs-4"><h3>Community</h3><ul><li><img src=/img/github.png>
<a href=https://github.com/vesoft-inc/nebula target=_blank>GitHub</a></li><li><img src=/img/forum.png>
<a href=https://discuss.nebula-graph.io/ target=_blank>Forum</a></li><li><img src=/img/slack.png>
<a href=https://join.slack.com/t/nebulagraph/shared_invite/enQtNjIzMjQ5MzE2OTQ2LTM0MjY0MWFlODg3ZTNjMjg3YWU5ZGY2NDM5MDhmOGU2OWI5ZWZjZDUwNTExMGIxZTk2ZmQxY2Q2MzM1OWJhMmY# target=_blank>Slack</a></li></ul></div><div class="row-content col-lg-4 col-sm-4 col-xs-4"><h3>Follow Us</h3><ul><li><img src=/img/twitter.png>
<a href=https://twitter.com/NebulaGraph title=Twitter data-toggle=modal target=_blank data-target>Twitter</a></li><li><img src=/img/linkedin.png>
<a href=https://www.linkedin.com/company/vesoft-nebula-graph/ title=LinkedIn data-toggle=modal target=_blank data-target>LinkedIn</a></li><li><img src=/img/youtube.png>
<a href=https://www.youtube.com/channel/UC73V8q795eSEMxDX4Pvdwmw title=YouTube data-toggle=modal target=_blank data-target>YouTube</a></li><li><img src=/img/facebook.png>
<a href=https://www.facebook.com/NebulaGraph/ title=FaceBook data-toggle=modal target=_blank data-target>FaceBook</a></li><li><img src=/img/weibo.png>
<a href=https://weibo.com/nebulagraph title=WeiBo data-toggle=modal target=_blank data-target>WeiBo</a></li><li><img src=/img/gongzhonghao.png>
<a href title="Official Accounts" data-toggle=modal target=_blank data-target=#myGongzhonghaoModal>Official Accounts</a></li></ul></div><div class="contactus row-content col-lg-4 col-sm-4 col-xs-4"><h3>Contact Us</h3><ul><li><img src=/img/iphone.png>
<a href data-toggle=modal target=_blank data-target>(+86) 0571-28120658</a></li><li><img src=/img/email.png>
<a href=mailto:info@vesoft.com data-toggle=modal target=_blank data-target>info@vesoft.com</a></li><li><img src=/img/weixin.png>
<a href data-toggle=modal target=_blank data-target=#myModal>WeChat</a></li></ul></div></div></div><p align=left style=font-size:16px><img src=/images/VEsoft.png style=margin-right:10px> Copyright &copy;2020 VESoft Inc</p><div class="modal fade" id=myGongzhonghaoModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class="modal-body wechat"><img src=/images/gonggonghaoCODE.jpg></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>close</button></div></div></div></div><div class="modal fade" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class="modal-body wechat"><img src=/images/wechat.png></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>close</button></div></div></div></div></footer></main><div id=J_Star_Popup class=nebula-star-popup></div><script src=/nebula-website/js/jquery.js></script><script src=/nebula-website/js/bootstrap.min.js></script><script src=/nebula-website/js/jquery.easing.min.js></script><script src=/nebula-website/js/jquery.fittext.js></script><script src=/nebula-website/js/wow.min.js></script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=5e7c2cc315c7990012ae38bc&product=inline-share-buttons" async></script><script src=/nebula-website/js/creative.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script src=/nebula-website/js/init.js></script><script src=/nebula-website/js/anchor.js></script></body></html><script>if(!sessionStorage.getItem("popupIsRemove")){$("#top").css("padding-top","98px")}</script>